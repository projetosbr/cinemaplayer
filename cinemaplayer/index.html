<!DOCTYPE html>
<html lang="pt-BR">
<head>
	<title>CinemaPlayer</title>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />
	<style>
		:root {
    		--primary: #e83e8c !important;
    	}
		.btn-primary {
	    	background-color: #e83e8c !important;
    		border-color: #e83e8c !important;
    	}
    	.btn-primary:hover {
    		background-color: #e83e8c !important;
    		border-color: #e83e8c !important;
		}
		.btn-primary.focus, .btn-primary:focus {
		    background-color: #e83e8c !important;
		    border-color: #e83e8c !important;
		    box-shadow: 0 0 0 0.2rem rgba(232,62,140,.5) !important;
		}
		.btn-primary.active, .btn-primary:active {
		    background-color: #e83e8c !important;
		    border-color: #e83e8c !important;
		    box-shadow: 0 0 0 0.2rem rgba(232,62,140,.5) !important;
		}
	</style>
</head>
<body>

	<div class="container mb-5 mt-3">
		<h1>CinemaPlayer</h1>
		<p>O CinemaPlayer é um player gratuito de séries.
			<br>Inserir o CinemaPlayer em seu site é simples, rápido e usa apenas uma linha de código HTML:</p>

		<code>&lt;iframe src="https://projetosbr.github.io/cinemaplayer/player/?serie=<kbd>código da série</kbd>&temporada=<kbd>número da temporada</kbd>&episodio=<kbd>número do episódio</kbd>&audio=<kbd>dublado ou legendado</kbd>" allowfullscreen frameborder="0"&gt;&lt;/iframe&gt;
		</code>

		<br><br>
		<p>Exemplo: (Série Stranger Things, Temporada 1, Episódio 1, Audio Dublado)</p>

		<code>&lt;iframe src="https://projetosbr.github.io/cinemaplayer/player/?serie=stranger-things&temporada=1&episodio=1&audio=dublado" allowfullscreen frameborder="0"&gt;&lt;/iframe&gt;
		</code>

		<br><br>
		<p>Sempre atualizamos o player após 1 ou 2 dias de um novo episódio ser transmitido pela emissora oficial.</p>
		
	</div>

	<div class="container">
		<h5>Pesquisar Série</h5>

		<input type="text" id="myInput" onkeyup="myFunction()" placeholder="Digite aqui... (O título original)" class="form-control">

		<div style="height: 500px; overflow: auto;">
			<table id="myTable" class="table">
				<tbody>
					<tr class="header">
			    		<th style="width:50%;">Nome</th>
			    		<th style="width:25%;">Código</th>
			    		<th style="width:25%;">Verificar Episódios Disponíveis</th>
			  		</tr>
			  		<tr>
			  			<td>Stranger Things</td>
			  			<td>stranger-things</td>
			  			<td>
			  				<a data-toggle="modal" data-target="#verificarModal" href="#" class="btn btn-primary" data-info="serie" data-title="stranger-things">Verificar</a>
			  			</td>
			  		</tr>
			  		<tr>
			  			<td>Supernatural</td>
			  			<td>supernatural</td>
			  			<td>
			  				<a data-toggle="modal" data-target="#verificarModal" href="#" class="btn btn-primary" data-info="serie" data-title="supernatural">Verificar</a>
			  			</td>
			  		</tr>
				</tbody>
			</table>
		</div>
	</div>

	<div class="modal fade" id="verificarModal" tabindex="-1" role="dialog" aria-labelledby="verificarModal" aria-hidden="true">
  		<div class="modal-dialog" role="document" style="max-width: 90%;">
    		<div class="modal-content">
    			<input type="text" id="copyText" style="height: 1px; border: none; opacity: 0;">
      			<div class="modal-header">
        			<h5 class="modal-title" id="vmTitle">Modal title</h5>
        			<button type="button" class="close" data-dismiss="modal" aria-label="Close">
          				<span aria-hidden="true">&times;</span>
        			</button>
      			</div>
      			<div class="modal-body" style="max-height: 75vh; overflow-y: auto;">
        			<table style="width: 100%;">
        				<tbody id="vmTable"></tbody>
        			</table>
      			</div>
      			<!--<div class="modal-footer">
        			<button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
        		<button type="button" class="btn btn-primary">Save changes</button>
      		</div>-->
    	</div>
  	</div>

</div>

	<p class="mt-5 text-center">Não hospedamos nenhum conteúdo protegido por direitos autorais. Somos apenas um player indexador de links encontrados na internet.</p>

<script>
function myFunction() {
  // Declare variables 
  var input, filter, table, tr, td, i;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  table = document.getElementById("myTable");
  tr = table.getElementsByTagName("tr");

  // Loop through all table rows, and hide those who don't match the search query
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[0];
    if (td) {
      if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    } 
  }
}
</script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

<script>
function copyLink(id) {
  	var button = document.getElementById(id);
  	var link = button.getAttribute('data-link');
  	var input = document.getElementById('copyText');
  	input.value = link;

  	var copyText = input;
  	copyText.select();
  	copyText.setSelectionRange(0, 99999)
  	document.execCommand("copy");

	alert('Copiado: '+copyText.value);
}

$('#verificarModal').on('show.bs.modal', function (event) {
  	var button = $(event.relatedTarget) // Button that triggered the modal
  	var info = button.data('info') // Extract info from data-* attributes
  	var title = button.data('title') // Extract info from data-* attributes

  	var requestURL = 'https://projetosbr.github.io/cinemaplayer/' + info + '/' + title + '.json';
	var request = new XMLHttpRequest();
	request.open('GET', requestURL);
	request.responseType = 'json';
	request.send();

	request.onload = function() {
		var json = request.response;		
		document.getElementById('vmTitle').innerHTML = json['title'];

		var vmTable = document.getElementById('vmTable');
		var table = "<tr class='header'><th>Temporada</th><th>Episódio</th><th>Dublado</th><th>Legendado</th><th>Copiar Link</th></tr><tr style='height:10px;'></tr>";

		for (var t = 0; t < Object.keys(json['content']).length; t++) {
			var tp = t+1;

			for (var e = 0; e < Object.keys(json['content']['t'+tp]).length; e++) {
				var ep = e+1;

				var epDub = false;
				var epLeg = false;
				if (json['content']['t'+tp]['ep'+ep]['dublado'] !== "") {
					epDub = true;
				}
				if (json['content']['t'+tp]['ep'+ep]['legendado'] !== "") {
					epLeg = true;
				}

				if (tp < 10) { var ttp="0"+tp; } else { var ttp=tp; }
				if (ep < 10) { var tep="0"+ep; } else { var tep=ep; }
				table = table+"<tr><td>Temporada "+ttp+"</td><td>Episódio "+tep+"</td>";
				
				if (epDub == true) {
					table = table+"<td><i class='far fa-check-circle text-success'></i></td>";
				} else {
					table = table+"<td><i class='far fa-times-circle text-danger'></i></td>";
				}
				if (epLeg == true) {
					table = table+"<td><i class='far fa-check-circle text-success'></i></td>";
				} else {
					table = table+"<td><i class='far fa-times-circle text-danger'></i></td>";
				}

				table = table+"<td>";
				if (epDub == true) {
					table = table+"<a class='btn btn-primary btn-sm' data-link='https://projetosbr.github.io/cinemaplayer/player/?serie="+title+"&temporada="+tp+"&episodio="+ep+"&audio=dublado' onclick='copyLink(\""+tp+ep+"dub\")' id='"+tp+ep+"dub'>Dublado</a> ";
				} else {
					table = table+"<a class='btn btn-secondary btn-sm disabled'>Dublado</a> ";
				}
				if (epLeg == true) {
					table = table+" <a class='btn btn-primary btn-sm' data-link='https://projetosbr.github.io/cinemaplayer/player/?serie="+title+"&temporada="+tp+"&episodio="+ep+"&audio=legendado' onclick='copyLink(\""+tp+ep+"leg\")' id='"+tp+ep+"leg'>Legendado</a>";
				} else {
					table = table+"<a class='btn btn-secondary btn-sm disabled'>Legendado</a>";
				}
				table = table+"</td></tr>";
			}
			table = table+"<tr style='height:10px;'></tr>"; // espaço a cada temporada
		}

        vmTable.innerHTML = table;
	}
})	
</script>

</body>
</html>